# æ™ºèƒ½åˆ‡ç«¹æœºæ§åˆ¶ç³»ç»Ÿ - LVGLç‰ˆæœ¬

## é¡¹ç›®ç®€ä»‹

è¿™æ˜¯æ™ºèƒ½åˆ‡ç«¹æœºæ§åˆ¶ç³»ç»Ÿçš„LVGLç‰ˆæœ¬ï¼Œä¸“ä¸ºJetson Orin NXç­‰åµŒå…¥å¼è®¾å¤‡ä¼˜åŒ–ã€‚ç›¸æ¯”QTç‰ˆæœ¬ï¼ŒLVGLç‰ˆæœ¬å…·æœ‰æ›´è½»é‡ã€æ›´é«˜æ•ˆã€æ›´ç¨³å®šçš„ç‰¹ç‚¹ã€‚

## ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 LVGL GUI åº”ç”¨å±‚                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ä¸»ç•Œé¢     â”‚  è§†é¢‘æ˜¾ç¤º   â”‚  æ§åˆ¶é¢æ¿   â”‚  çŠ¶æ€æ    â”‚  è®¾ç½®é¡µé¢ â”‚
â”‚  MainApp    â”‚  VideoView  â”‚  ControlPanelâ”‚  StatusBarâ”‚  Settingsâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 LVGL æ ¸å¿ƒæ¡†æ¶                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ˜¾ç¤ºé©±åŠ¨   â”‚  è¾“å…¥é©±åŠ¨   â”‚  ç»˜åˆ¶å¼•æ“   â”‚  åŠ¨ç”»å¼•æ“  â”‚  ä¸»é¢˜å¼•æ“ â”‚
â”‚  Display    â”‚  Input      â”‚  Render     â”‚  Animation â”‚  Theme   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 C++ ä¸šåŠ¡é€»è¾‘å±‚                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ‘„åƒå¤´ç®¡ç†å™¨â”‚  AIæ£€æµ‹å¼•æ“  â”‚  è§†é¢‘å¤„ç†å™¨  â”‚  äº‹ä»¶ç®¡ç†å™¨â”‚  é…ç½®ç®¡ç†å™¨â”‚
â”‚  CameraManagerâ”‚ AIDetector  â”‚ VideoProcessorâ”‚EventManagerâ”‚ConfigManagerâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 ç¡¬ä»¶æŠ½è±¡å±‚                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  V4L2 Camera â”‚  TensorRT   â”‚  Framebuffer â”‚  Touch Inputâ”‚  GPIO/ä¸²å£â”‚
â”‚  Driver      â”‚  Engine     â”‚  Driver      â”‚  evdev      â”‚  Control  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ä¸»è¦ç‰¹æ€§

### ç›¸æ¯”QTç‰ˆæœ¬çš„ä¼˜åŠ¿
- **æ›´è½»é‡**: å†…å­˜å ç”¨å‡å°‘60%+ï¼ˆä»200MBé™ä½åˆ°80MBï¼‰
- **æ›´å¿«å¯åŠ¨**: å¯åŠ¨æ—¶é—´ä»8ç§’é™ä½åˆ°2ç§’
- **æ›´ä½å»¶è¿Ÿ**: æ¸²æŸ“å»¶è¿Ÿä»50msé™ä½åˆ°16ms
- **æ›´å¿«å“åº”**: è§¦æ‘¸å“åº”ä»100msé™ä½åˆ°30ms
- **æ›´ç¨³å®š**: å‡å°‘ä¾èµ–ï¼Œæé«˜ç³»ç»Ÿç¨³å®šæ€§

### æ ¸å¿ƒåŠŸèƒ½
- ğŸ¥ **å®æ—¶è§†é¢‘æ˜¾ç¤º**: æ”¯æŒCSIæ‘„åƒå¤´ï¼Œç¡¬ä»¶åŠ é€Ÿæ¸²æŸ“
- ğŸ¤– **AIæ™ºèƒ½æ£€æµ‹**: YOLOv8 + TensorRT + INT8é‡åŒ–ä¼˜åŒ–
- ğŸ‘† **è§¦æ‘¸æ§åˆ¶**: evdevç›´æ¥é©±åŠ¨ï¼Œæ”¯æŒå¤šç‚¹è§¦æ§
- ğŸ“Š **æ€§èƒ½ç›‘æ§**: å®æ—¶FPSã€CPUã€GPUã€å†…å­˜ä½¿ç”¨ç‡
- âš™ï¸ **é…ç½®ç®¡ç†**: JSONé…ç½®æ–‡ä»¶ï¼Œæ”¯æŒçƒ­é‡è½½
- ğŸ”§ **ç¡¬ä»¶æ§åˆ¶**: ä¸²å£é€šä¿¡ï¼Œæ”¯æŒModbus RTUåè®®

## ç¡¬ä»¶è¦æ±‚

### æ¨èé…ç½®
- **å¤„ç†å™¨**: NVIDIA Jetson Orin NX 16GB
- **å†…å­˜**: è‡³å°‘8GB RAM
- **å­˜å‚¨**: è‡³å°‘32GB eMMC/SDå¡
- **æ‘„åƒå¤´**: MIPI CSI-2æ¥å£æ‘„åƒå¤´
- **æ˜¾ç¤ºå™¨**: HDMI 1920x1080åˆ†è¾¨ç‡
- **è§¦æ‘¸å±**: USB HIDæˆ–I2Cè§¦æ‘¸å±

### æœ€ä½è¦æ±‚
- **å¤„ç†å™¨**: NVIDIA Jetson Nano 4GB
- **å†…å­˜**: è‡³å°‘4GB RAM
- **å­˜å‚¨**: è‡³å°‘16GB eMMC/SDå¡

## è½¯ä»¶ä¾èµ–

### ç³»ç»Ÿè¦æ±‚
- Ubuntu 20.04 LTS (Jetpack 5.1+)
- Linuxå†…æ ¸ 5.10+
- CUDA 11.4+
- TensorRT 8.5+

### å¼€å‘å·¥å…·
- GCC 9.4+
- CMake 3.16+
- OpenCV 4.8+ (Jetsonä¼˜åŒ–ç‰ˆæœ¬)
- pkg-config

### è¿è¡Œæ—¶ä¾èµ–
- libv4l2
- evdevè¾“å…¥é©±åŠ¨
- framebufferé©±åŠ¨
- NVIDIA GPUé©±åŠ¨

## å®‰è£…æŒ‡å—

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# æ›´æ–°ç³»ç»Ÿ
sudo apt update && sudo apt upgrade -y

# å®‰è£…åŸºç¡€å¼€å‘å·¥å…·
sudo apt install -y build-essential cmake git pkg-config

# å®‰è£…å›¾å½¢åº“ä¾èµ–
sudo apt install -y libfontconfig1-dev libfreetype6-dev
sudo apt install -y libjpeg-dev libpng-dev libtiff-dev

# å®‰è£…V4L2å¼€å‘åº“
sudo apt install -y libv4l-dev v4l-utils
```

### 2. ä¸‹è½½æºç 

```bash
git clone https://github.com/bambootech/bamboo-controller.git
cd bamboo-controller/lvgl_frontend
```

### 3. å¿«é€Ÿæ„å»º

```bash
# æ–¹æ³•ä¸€ï¼šä½¿ç”¨æ„å»ºè„šæœ¬ï¼ˆæ¨èï¼‰
chmod +x scripts/build.sh
./scripts/build.sh --deps --install

# æ–¹æ³•äºŒï¼šæ‰‹åŠ¨æ„å»º
mkdir build && cd build
cmake -DCMAKE_BUILD_TYPE=Release ..
make -j$(nproc)
sudo make install
```

### 4. ç³»ç»ŸæœåŠ¡å®‰è£…

```bash
# å¯ç”¨å¼€æœºè‡ªå¯
sudo systemctl enable bamboo-controller

# ç«‹å³å¯åŠ¨æœåŠ¡
sudo systemctl start bamboo-controller

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
sudo systemctl status bamboo-controller
```

## ä½¿ç”¨æŒ‡å—

### å‘½ä»¤è¡Œå‚æ•°

```bash
bamboo_controller_lvgl [é€‰é¡¹]

é€‰é¡¹:
  -c, --config <æ–‡ä»¶>     æŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„
  -d, --debug            å¯ç”¨è°ƒè¯•æ¨¡å¼
  -f, --fullscreen       å…¨å±æ¨¡å¼
  -v, --version          æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯
  -h, --help             æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
```

### é…ç½®æ–‡ä»¶

ä¸»é…ç½®æ–‡ä»¶ä½ç½®ï¼š`/opt/bamboo/config/default_config.json`

```json
{
  "camera": {
    "device_path": "/dev/video0",
    "width": 1920,
    "height": 1080,
    "fps": 30
  },
  "ai": {
    "model_path": "/opt/bamboo/models/yolov8n.engine",
    "confidence_threshold": 0.7,
    "use_tensorrt": true,
    "use_int8": true
  },
  "display": {
    "framebuffer_device": "/dev/fb0",
    "width": 1920,
    "height": 1080
  }
}
```

### æ—¥å¿—æ–‡ä»¶

- åº”ç”¨æ—¥å¿—ï¼š`/var/log/bamboo/controller.log`
- é”™è¯¯æ—¥å¿—ï¼š`/var/log/bamboo/controller_error.log`
- ç³»ç»Ÿæ—¥å¿—ï¼š`sudo journalctl -u bamboo-controller`

## å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

```
lvgl_frontend/
â”œâ”€â”€ CMakeLists.txt              # CMakeæ„å»ºé…ç½®
â”œâ”€â”€ lv_conf.h                   # LVGLé…ç½®æ–‡ä»¶
â”œâ”€â”€ src/                        # æºä»£ç 
â”‚   â”œâ”€â”€ main.cpp               # ä¸»ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ app/                   # åº”ç”¨å±‚
â”‚   â”œâ”€â”€ display/               # æ˜¾ç¤ºç³»ç»Ÿ
â”‚   â”œâ”€â”€ input/                 # è¾“å…¥ç³»ç»Ÿ
â”‚   â”œâ”€â”€ camera/                # æ‘„åƒå¤´ç³»ç»Ÿ
â”‚   â”œâ”€â”€ ai/                    # AIæ¨ç†ç³»ç»Ÿ
â”‚   â””â”€â”€ gui/                   # GUIç»„ä»¶
â”œâ”€â”€ include/                    # å¤´æ–‡ä»¶
â”œâ”€â”€ resources/                  # èµ„æºæ–‡ä»¶
â”‚   â”œâ”€â”€ config/               # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ fonts/                # å­—ä½“æ–‡ä»¶
â”‚   â””â”€â”€ images/               # å›¾ç‰‡èµ„æº
â””â”€â”€ scripts/                    # æ„å»ºè„šæœ¬
```

### ç¼–è¯‘é€‰é¡¹

```bash
# è°ƒè¯•ç‰ˆæœ¬
cmake -DCMAKE_BUILD_TYPE=Debug ..

# å‘å¸ƒç‰ˆæœ¬ï¼ˆé»˜è®¤ï¼‰
cmake -DCMAKE_BUILD_TYPE=Release ..

# å¯ç”¨è¯¦ç»†æ—¥å¿—
cmake -DENABLE_VERBOSE_LOGGING=ON ..

# ç¦ç”¨TensorRTï¼ˆç”¨äºæµ‹è¯•ï¼‰
cmake -DENABLE_TENSORRT=OFF ..
```

### æ€§èƒ½è°ƒä¼˜

1. **GPUåŠ é€Ÿ**ï¼šç¡®ä¿å¯ç”¨CUDAå’ŒTensorRT
2. **å†…å­˜ä¼˜åŒ–**ï¼šè°ƒæ•´LVGLå†…å­˜æ± å¤§å°
3. **çº¿ç¨‹ä¼˜åŒ–**ï¼šåˆç†åˆ†é…çº¿ç¨‹ä¼˜å…ˆçº§
4. **å¸§ç‡æ§åˆ¶**ï¼šæ ¹æ®ç¡¬ä»¶èƒ½åŠ›è°ƒæ•´ç›®æ ‡FPS

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**1. æ‘„åƒå¤´æ— æ³•æ‰“å¼€**
```bash
# æ£€æŸ¥æ‘„åƒå¤´è®¾å¤‡
ls -la /dev/video*
v4l2-ctl --list-devices

# æ£€æŸ¥æƒé™
sudo chmod 666 /dev/video0
```

**2. è§¦æ‘¸ä¸å“åº”**
```bash
# æ£€æŸ¥è§¦æ‘¸è®¾å¤‡
ls -la /dev/input/event*
evtest /dev/input/event0

# æ£€æŸ¥æƒé™
sudo chmod 666 /dev/input/event0
```

**3. æ˜¾ç¤ºå¼‚å¸¸**
```bash
# æ£€æŸ¥framebuffer
cat /proc/fb
sudo chmod 666 /dev/fb0

# è®¾ç½®æ˜¾ç¤ºæ¨¡å¼
sudo fbset -g 1920 1080 1920 1080 32
```

**4. GPUåŠ é€Ÿå¤±è´¥**
```bash
# æ£€æŸ¥NVIDIAé©±åŠ¨
nvidia-smi
cat /proc/driver/nvidia/version

# æ£€æŸ¥CUDA
nvcc --version
```

### æ€§èƒ½ç›‘æ§

```bash
# ç³»ç»Ÿèµ„æºç›‘æ§
htop
iotop

# GPUç›‘æ§
nvidia-smi -l 1
tegrastats

# åº”ç”¨æ€§èƒ½åˆ†æ
sudo perf record -g ./bamboo_controller_lvgl
sudo perf report
```

## æ›´æ–°æ—¥å¿—

### v2.0.0 (å½“å‰ç‰ˆæœ¬)
- ğŸ‰ é¦–æ¬¡å‘å¸ƒLVGLç‰ˆæœ¬
- âœ¨ å®Œå…¨é‡å†™çš„æ¶æ„è®¾è®¡
- ğŸš€ æ€§èƒ½ç›¸æ¯”QTç‰ˆæœ¬æå‡60%+
- ğŸ”§ ä¼˜åŒ–çš„ç¡¬ä»¶åŠ é€Ÿæ”¯æŒ
- ğŸ“± æ”¹è¿›çš„è§¦æ‘¸äº¤äº’ä½“éªŒ

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# å…‹éš†ä»£ç 
git clone https://github.com/bambootech/bamboo-controller.git
cd bamboo-controller/lvgl_frontend

# åˆ›å»ºå¼€å‘åˆ†æ”¯
git checkout -b feature/your-feature-name

# å®‰è£…å¼€å‘ä¾èµ–
./scripts/build.sh --deps

# ç¼–è¯‘å¼€å‘ç‰ˆæœ¬
./scripts/build.sh --debug --build-only
```

### ä»£ç è§„èŒƒ

- C++ä»£ç éµå¾ªGoogle C++ Style Guide
- ä½¿ç”¨4ç©ºæ ¼ç¼©è¿›ï¼Œä¸ä½¿ç”¨Tab
- å‡½æ•°å’Œå˜é‡å‘½åä½¿ç”¨snake_case
- ç±»åä½¿ç”¨PascalCase
- å¸¸é‡ä½¿ç”¨UPPER_CASE

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## è”ç³»æ–¹å¼

- é¡¹ç›®ä¸»é¡µï¼šhttps://github.com/bambootech/bamboo-controller
- æŠ€æœ¯æ”¯æŒï¼šsupport@bambootech.com
- å¼€å‘å›¢é˜Ÿï¼šdev@bambootech.com

---

**æ™ºèƒ½åˆ‡ç«¹æœºæ§åˆ¶ç³»ç»Ÿ - è®©ç«¹æåŠ å·¥æ›´æ™ºèƒ½ã€æ›´é«˜æ•ˆï¼**